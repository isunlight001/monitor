Index: src/main/resources/schema.sql
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>-- 基金净值表\r\nCREATE TABLE IF NOT EXISTS `fund_nav` (\r\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n    fund_code VARCHAR(20) NOT NULL COMMENT '基金代码',\r\n    fund_name VARCHAR(100) NOT NULL COMMENT '基金名称',\r\n    nav_date DATE NOT NULL COMMENT '净值日期',\r\n    unit_nav DECIMAL(10,4) NOT NULL COMMENT '单位净值',\r\n    daily_return DECIMAL(10,4) COMMENT '日涨跌幅',\r\n    create_time DATETIME COMMENT '创建时间',\r\n    update_time DATETIME COMMENT '更新时间',\r\n    UNIQUE KEY uk_fund_date (fund_code, nav_date)\r\n) COMMENT '基金净值表';\r\n\r\n-- 基金监控表\r\nCREATE TABLE IF NOT EXISTS `fund_monitor` (\r\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n    fund_code VARCHAR(20) NOT NULL COMMENT '基金代码',\r\n    fund_name VARCHAR(100) NOT NULL COMMENT '基金名称',\r\n    enabled TINYINT(1) DEFAULT 1 COMMENT '是否启用监控 (1:启用, 0:禁用)',\r\n    create_time DATETIME COMMENT '创建时间',\r\n    update_time DATETIME COMMENT '更新时间',\r\n    UNIQUE KEY uk_fund_code (fund_code)\r\n) COMMENT '基金监控表';\r\n\r\n-- 指数数据表\r\nCREATE TABLE IF NOT EXISTS `index_data` (\r\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n    index_code VARCHAR(20) NOT NULL COMMENT '指数代码',\r\n    index_name VARCHAR(100) NOT NULL COMMENT '指数名称',\r\n    trade_date DATE NOT NULL COMMENT '交易日期',\r\n    open_price DECIMAL(10,4) COMMENT '开盘价',\r\n    close_price DECIMAL(10,4) COMMENT '收盘价',\r\n    high_price DECIMAL(10,4) COMMENT '最高价',\r\n    low_price DECIMAL(10,4) COMMENT '最低价',\r\n    daily_return DECIMAL(10,4) COMMENT '日涨跌幅',\r\n    volume BIGINT COMMENT '成交量',\r\n    amount DECIMAL(15,4) COMMENT '成交额',\r\n    create_time DATETIME COMMENT '创建时间',\r\n    update_time DATETIME COMMENT '更新时间',\r\n    UNIQUE KEY uk_index_date (index_code, trade_date)\r\n) COMMENT '指数数据表';\r\n\r\n-- 告警记录表\r\nCREATE TABLE IF NOT EXISTS `alarm_record` (\r\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n    fund_code VARCHAR(20) COMMENT '基金代码',\r\n    fund_name VARCHAR(100) COMMENT '基金名称',\r\n    rule_code VARCHAR(20) NOT NULL COMMENT '规则代码 (A,B,C,D,E等)',\r\n    rule_description VARCHAR(200) NOT NULL COMMENT '规则描述',\r\n    consecutive_days INT COMMENT '连续天数',\r\n    cumulative_return DECIMAL(10,4) COMMENT '累计涨跌幅',\r\n    daily_return DECIMAL(10,4) COMMENT '单日涨跌幅',\r\n    nav_date DATE COMMENT '净值日期',\r\n    unit_nav DECIMAL(10,4) COMMENT '单位净值',\r\n    alarm_content TEXT COMMENT '告警内容',\r\n    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\r\n    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\r\n    INDEX idx_fund_code (fund_code),\r\n    INDEX idx_rule_code (rule_code),\r\n    INDEX idx_create_time (create_time)\r\n) COMMENT '告警记录表';\r\n\r\n-- 邮件接收人表\r\nCREATE TABLE IF NOT EXISTS `email_recipient` (\r\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n    name VARCHAR(100) NOT NULL COMMENT '接收人姓名',\r\n    email VARCHAR(100) NOT NULL COMMENT '接收人邮箱地址',\r\n    enabled TINYINT(1) DEFAULT 1 COMMENT '是否启用 (1:启用, 0:禁用)',\r\n    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\r\n    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\r\n    UNIQUE KEY uk_email (email)\r\n) COMMENT '邮件接收人表';\r\n\r\n-- 系统配置表\r\nCREATE TABLE IF NOT EXISTS `system_config` (\r\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n    config_key VARCHAR(100) NOT NULL COMMENT '配置键',\r\n    config_value VARCHAR(500) NOT NULL COMMENT '配置值',\r\n    description VARCHAR(200) COMMENT '配置描述',\r\n    enabled TINYINT(1) DEFAULT 1 COMMENT '是否启用 (1:启用, 0:禁用)',\r\n    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\r\n    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\r\n    UNIQUE KEY uk_config_key (config_key)\r\n) COMMENT '系统配置表';\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/schema.sql b/src/main/resources/schema.sql
--- a/src/main/resources/schema.sql	(revision 5685c662d7455b53d49f97422dee587071314f0d)
+++ b/src/main/resources/schema.sql	(date 1764902240079)
@@ -1,84 +1,85 @@
 -- 基金净值表
-CREATE TABLE IF NOT EXISTS `fund_nav` (
-    id BIGINT AUTO_INCREMENT PRIMARY KEY,
-    fund_code VARCHAR(20) NOT NULL COMMENT '基金代码',
-    fund_name VARCHAR(100) NOT NULL COMMENT '基金名称',
-    nav_date DATE NOT NULL COMMENT '净值日期',
-    unit_nav DECIMAL(10,4) NOT NULL COMMENT '单位净值',
-    daily_return DECIMAL(10,4) COMMENT '日涨跌幅',
-    create_time DATETIME COMMENT '创建时间',
-    update_time DATETIME COMMENT '更新时间',
-    UNIQUE KEY uk_fund_date (fund_code, nav_date)
-) COMMENT '基金净值表';
+CREATE TABLE IF NOT EXISTS fund_nav (
+    id INTEGER PRIMARY KEY AUTOINCREMENT,
+    fund_code VARCHAR(20) NOT NULL,
+    fund_name VARCHAR(100) NOT NULL,
+    nav_date DATE NOT NULL,
+    unit_nav DECIMAL(10,4) NOT NULL,
+    daily_return DECIMAL(10,4),
+    create_time TIMESTAMP,
+    update_time TIMESTAMP,
+    UNIQUE(fund_code, nav_date)
+);
 
 -- 基金监控表
-CREATE TABLE IF NOT EXISTS `fund_monitor` (
-    id BIGINT AUTO_INCREMENT PRIMARY KEY,
-    fund_code VARCHAR(20) NOT NULL COMMENT '基金代码',
-    fund_name VARCHAR(100) NOT NULL COMMENT '基金名称',
-    enabled TINYINT(1) DEFAULT 1 COMMENT '是否启用监控 (1:启用, 0:禁用)',
-    create_time DATETIME COMMENT '创建时间',
-    update_time DATETIME COMMENT '更新时间',
-    UNIQUE KEY uk_fund_code (fund_code)
-) COMMENT '基金监控表';
+CREATE TABLE IF NOT EXISTS fund_monitor (
+    id INTEGER PRIMARY KEY AUTOINCREMENT,
+    fund_code VARCHAR(20) NOT NULL,
+    fund_name VARCHAR(100) NOT NULL,
+    enabled BOOLEAN DEFAULT 1,
+    create_time TIMESTAMP,
+    update_time TIMESTAMP,
+    UNIQUE(fund_code)
+);
 
 -- 指数数据表
-CREATE TABLE IF NOT EXISTS `index_data` (
-    id BIGINT AUTO_INCREMENT PRIMARY KEY,
-    index_code VARCHAR(20) NOT NULL COMMENT '指数代码',
-    index_name VARCHAR(100) NOT NULL COMMENT '指数名称',
-    trade_date DATE NOT NULL COMMENT '交易日期',
-    open_price DECIMAL(10,4) COMMENT '开盘价',
-    close_price DECIMAL(10,4) COMMENT '收盘价',
-    high_price DECIMAL(10,4) COMMENT '最高价',
-    low_price DECIMAL(10,4) COMMENT '最低价',
-    daily_return DECIMAL(10,4) COMMENT '日涨跌幅',
-    volume BIGINT COMMENT '成交量',
-    amount DECIMAL(15,4) COMMENT '成交额',
-    create_time DATETIME COMMENT '创建时间',
-    update_time DATETIME COMMENT '更新时间',
-    UNIQUE KEY uk_index_date (index_code, trade_date)
-) COMMENT '指数数据表';
+CREATE TABLE IF NOT EXISTS index_data (
+    id INTEGER PRIMARY KEY AUTOINCREMENT,
+    index_code VARCHAR(20) NOT NULL,
+    index_name VARCHAR(100) NOT NULL,
+    trade_date DATE NOT NULL,
+    open_price DECIMAL(10,4),
+    close_price DECIMAL(10,4),
+    high_price DECIMAL(10,4),
+    low_price DECIMAL(10,4),
+    daily_return DECIMAL(10,4),
+    volume BIGINT,
+    amount DECIMAL(15,4),
+    create_time TIMESTAMP,
+    update_time TIMESTAMP,
+    UNIQUE(index_code, trade_date)
+);
 
 -- 告警记录表
-CREATE TABLE IF NOT EXISTS `alarm_record` (
-    id BIGINT AUTO_INCREMENT PRIMARY KEY,
-    fund_code VARCHAR(20) COMMENT '基金代码',
-    fund_name VARCHAR(100) COMMENT '基金名称',
-    rule_code VARCHAR(20) NOT NULL COMMENT '规则代码 (A,B,C,D,E等)',
-    rule_description VARCHAR(200) NOT NULL COMMENT '规则描述',
-    consecutive_days INT COMMENT '连续天数',
-    cumulative_return DECIMAL(10,4) COMMENT '累计涨跌幅',
-    daily_return DECIMAL(10,4) COMMENT '单日涨跌幅',
-    nav_date DATE COMMENT '净值日期',
-    unit_nav DECIMAL(10,4) COMMENT '单位净值',
-    alarm_content TEXT COMMENT '告警内容',
-    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
-    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
-    INDEX idx_fund_code (fund_code),
-    INDEX idx_rule_code (rule_code),
-    INDEX idx_create_time (create_time)
-) COMMENT '告警记录表';
+CREATE TABLE IF NOT EXISTS alarm_record (
+    id INTEGER PRIMARY KEY AUTOINCREMENT,
+    fund_code VARCHAR(20),
+    fund_name VARCHAR(100),
+    rule_code VARCHAR(20) NOT NULL,
+    rule_description VARCHAR(200) NOT NULL,
+    consecutive_days INTEGER,
+    cumulative_return DECIMAL(10,4),
+    daily_return DECIMAL(10,4),
+    nav_date DATE,
+    unit_nav DECIMAL(10,4),
+    alarm_content TEXT,
+    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
+    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
+);
+
+CREATE INDEX IF NOT EXISTS idx_alarm_fund_code ON alarm_record(fund_code);
+CREATE INDEX IF NOT EXISTS idx_alarm_rule_code ON alarm_record(rule_code);
+CREATE INDEX IF NOT EXISTS idx_alarm_create_time ON alarm_record(create_time);
 
 -- 邮件接收人表
-CREATE TABLE IF NOT EXISTS `email_recipient` (
-    id BIGINT AUTO_INCREMENT PRIMARY KEY,
-    name VARCHAR(100) NOT NULL COMMENT '接收人姓名',
-    email VARCHAR(100) NOT NULL COMMENT '接收人邮箱地址',
-    enabled TINYINT(1) DEFAULT 1 COMMENT '是否启用 (1:启用, 0:禁用)',
-    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
-    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
-    UNIQUE KEY uk_email (email)
-) COMMENT '邮件接收人表';
+CREATE TABLE IF NOT EXISTS email_recipient (
+    id INTEGER PRIMARY KEY AUTOINCREMENT,
+    name VARCHAR(100) NOT NULL,
+    email VARCHAR(100) NOT NULL,
+    enabled BOOLEAN DEFAULT 1,
+    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
+    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
+    UNIQUE(email)
+);
 
 -- 系统配置表
-CREATE TABLE IF NOT EXISTS `system_config` (
-    id BIGINT AUTO_INCREMENT PRIMARY KEY,
-    config_key VARCHAR(100) NOT NULL COMMENT '配置键',
-    config_value VARCHAR(500) NOT NULL COMMENT '配置值',
-    description VARCHAR(200) COMMENT '配置描述',
-    enabled TINYINT(1) DEFAULT 1 COMMENT '是否启用 (1:启用, 0:禁用)',
-    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
-    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
-    UNIQUE KEY uk_config_key (config_key)
-) COMMENT '系统配置表';
+CREATE TABLE IF NOT EXISTS system_config (
+    id INTEGER PRIMARY KEY AUTOINCREMENT,
+    config_key VARCHAR(100) NOT NULL,
+    config_value VARCHAR(500) NOT NULL,
+    description VARCHAR(200),
+    enabled BOOLEAN DEFAULT 1,
+    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
+    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
+    UNIQUE(config_key)
+);
\ No newline at end of file
Index: pom.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n    <groupId>com.example</groupId>\r\n    <artifactId>monitor</artifactId>\r\n    <version>1.0-SNAPSHOT</version>\r\n    <packaging>jar</packaging>\r\n    <name>fund-monitor</name>\r\n    <description>Spring Boot ThreadPool Monitor Demo</description>\r\n    <parent>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-starter-parent</artifactId>\r\n        <version>2.7.18</version>\r\n        <relativePath/>\r\n    </parent>\r\n    <properties>\r\n        <java.version>1.8</java.version>\r\n    </properties>\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.jsoup</groupId>\r\n            <artifactId>jsoup</artifactId>\r\n            <version>1.18.1</version>\r\n        </dependency>\r\n            <!-- 读写 Excel -->\r\n            <dependency>\r\n                <groupId>org.apache.poi</groupId>\r\n                <artifactId>poi-ooxml</artifactId>\r\n                <version>5.2.5</version>\r\n            </dependency>\r\n            <!-- HTTP 工具 -->\r\n            <dependency>\r\n                <groupId>cn.hutool</groupId>\r\n                <artifactId>hutool-all</artifactId>\r\n                <version>5.8.21</version>\r\n            </dependency>\r\n        <dependency>\r\n            <groupId>org.jsoup</groupId>\r\n            <artifactId>jsoup</artifactId>\r\n            <version>1.15.3</version>\r\n        </dependency>\r\n\r\n        <!-- 拉取数据 -->\r\n        <dependency>\r\n            <groupId>com.squareup.okhttp3</groupId>\r\n            <artifactId>okhttp</artifactId>\r\n            <version>4.12.0</version>\r\n        </dependency>\r\n        <!-- 写 Excel -->\r\n        <dependency>\r\n            <groupId>org.apache.poi</groupId>\r\n            <artifactId>poi-ooxml</artifactId>\r\n            <version>5.2.3</version>\r\n        </dependency>\r\n        <!-- 日期工具 -->\r\n        <dependency>\r\n            <groupId>com.fasterxml.jackson.core</groupId>\r\n            <artifactId>jackson-databind</artifactId>\r\n            <version>2.15.2</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework</groupId>\r\n            <artifactId>spring-context-indexer</artifactId>\r\n            <optional>true</optional>\r\n            <version>5.3.27</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-web</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-actuator</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.micrometer</groupId>\r\n            <artifactId>micrometer-registry-prometheus</artifactId>\r\n        </dependency>\r\n        <!-- 添加Druid连接池 -->\r\n        <dependency>\r\n            <groupId>com.alibaba</groupId>\r\n            <artifactId>druid-spring-boot-starter</artifactId>\r\n            <version>1.2.20</version>\r\n        </dependency>\r\n        <!-- 添加MySQL驱动 -->\r\n        <dependency>\r\n            <groupId>mysql</groupId>\r\n            <artifactId>mysql-connector-java</artifactId>\r\n            <version>8.0.33</version>\r\n            <scope>runtime</scope>\r\n        </dependency>\r\n        <!-- 添加MyBatis -->\r\n        <dependency>\r\n            <groupId>org.mybatis.spring.boot</groupId>\r\n            <artifactId>mybatis-spring-boot-starter</artifactId>\r\n            <version>2.3.1</version>\r\n        </dependency>\r\n        <!-- 邮件发送 -->\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-mail</artifactId>\r\n        </dependency>\r\n        <!-- 用于微信通知的HTTP客户端支持 -->\r\n        <dependency>\r\n            <groupId>com.squareup.okhttp3</groupId>\r\n            <artifactId>okhttp</artifactId>\r\n            <version>4.12.0</version>\r\n        </dependency>\r\n        <!-- 测试依赖 -->\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-test</artifactId>\r\n            <scope>test</scope>\r\n            <exclusions>\r\n                <exclusion>\r\n                    <groupId>org.junit.vintage</groupId>\r\n                    <artifactId>junit-vintage-engine</artifactId>\r\n                </exclusion>\r\n            </exclusions>\r\n        </dependency>\r\n    </dependencies>\r\n    <build>\r\n        <plugins>\r\n            <plugin>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-maven-plugin</artifactId>\r\n            </plugin>\r\n        </plugins>\r\n    </build>\r\n</project> 
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pom.xml b/pom.xml
--- a/pom.xml	(revision 5685c662d7455b53d49f97422dee587071314f0d)
+++ b/pom.xml	(date 1764902207791)
@@ -1,3 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
 <project xmlns="http://maven.apache.org/POM/4.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
@@ -18,95 +19,107 @@
         <java.version>1.8</java.version>
     </properties>
     <dependencies>
+        <!-- Jsoup HTML解析 -->
         <dependency>
             <groupId>org.jsoup</groupId>
             <artifactId>jsoup</artifactId>
             <version>1.18.1</version>
         </dependency>
-            <!-- 读写 Excel -->
-            <dependency>
-                <groupId>org.apache.poi</groupId>
-                <artifactId>poi-ooxml</artifactId>
-                <version>5.2.5</version>
-            </dependency>
-            <!-- HTTP 工具 -->
-            <dependency>
-                <groupId>cn.hutool</groupId>
-                <artifactId>hutool-all</artifactId>
-                <version>5.8.21</version>
-            </dependency>
-        <dependency>
-            <groupId>org.jsoup</groupId>
-            <artifactId>jsoup</artifactId>
-            <version>1.15.3</version>
+        
+        <!-- Apache POI 用于Excel操作 -->
+        <dependency>
+            <groupId>org.apache.poi</groupId>
+            <artifactId>poi-ooxml</artifactId>
+            <version>5.2.5</version>
+        </dependency>
+        
+        <!-- Hutool 工具库 -->
+        <dependency>
+            <groupId>cn.hutool</groupId>
+            <artifactId>hutool-all</artifactId>
+            <version>5.8.21</version>
         </dependency>
-
-        <!-- 拉取数据 -->
+        
+        <!-- OkHttp HTTP客户端 -->
         <dependency>
             <groupId>com.squareup.okhttp3</groupId>
             <artifactId>okhttp</artifactId>
             <version>4.12.0</version>
         </dependency>
-        <!-- 写 Excel -->
-        <dependency>
-            <groupId>org.apache.poi</groupId>
-            <artifactId>poi-ooxml</artifactId>
-            <version>5.2.3</version>
-        </dependency>
-        <!-- 日期工具 -->
+        
+        <!-- Jackson JSON处理 -->
         <dependency>
             <groupId>com.fasterxml.jackson.core</groupId>
             <artifactId>jackson-databind</artifactId>
             <version>2.15.2</version>
         </dependency>
+        
+        <!-- Spring Context Indexer 提高启动速度 -->
         <dependency>
             <groupId>org.springframework</groupId>
             <artifactId>spring-context-indexer</artifactId>
             <optional>true</optional>
             <version>5.3.27</version>
         </dependency>
+        
+        <!-- Spring Boot Web Starter -->
         <dependency>
             <groupId>org.springframework.boot</groupId>
             <artifactId>spring-boot-starter-web</artifactId>
+            <exclusions>
+                <!-- 排除Tomcat，使用更轻量级的 Undertow -->
+                <exclusion>
+                    <groupId>org.springframework.boot</groupId>
+                    <artifactId>spring-boot-starter-tomcat</artifactId>
+                </exclusion>
+            </exclusions>
         </dependency>
+        
+        <!-- 使用Undertow作为Web服务器，提高性能 -->
+        <dependency>
+            <groupId>org.springframework.boot</groupId>
+            <artifactId>spring-boot-starter-undertow</artifactId>
+        </dependency>
+        
+        <!-- Spring Boot Actuator -->
         <dependency>
             <groupId>org.springframework.boot</groupId>
             <artifactId>spring-boot-starter-actuator</artifactId>
         </dependency>
+        
+        <!-- Prometheus监控 -->
         <dependency>
             <groupId>io.micrometer</groupId>
             <artifactId>micrometer-registry-prometheus</artifactId>
         </dependency>
-        <!-- 添加Druid连接池 -->
+        
+        <!-- Druid连接池 -->
         <dependency>
             <groupId>com.alibaba</groupId>
             <artifactId>druid-spring-boot-starter</artifactId>
             <version>1.2.20</version>
         </dependency>
-        <!-- 添加MySQL驱动 -->
+        
+        <!-- SQLite数据库 -->
         <dependency>
-            <groupId>mysql</groupId>
-            <artifactId>mysql-connector-java</artifactId>
-            <version>8.0.33</version>
+            <groupId>org.xerial</groupId>
+            <artifactId>sqlite-jdbc</artifactId>
             <scope>runtime</scope>
         </dependency>
-        <!-- 添加MyBatis -->
+        
+        <!-- MyBatis -->
         <dependency>
             <groupId>org.mybatis.spring.boot</groupId>
             <artifactId>mybatis-spring-boot-starter</artifactId>
             <version>2.3.1</version>
         </dependency>
+        
         <!-- 邮件发送 -->
         <dependency>
             <groupId>org.springframework.boot</groupId>
             <artifactId>spring-boot-starter-mail</artifactId>
         </dependency>
-        <!-- 用于微信通知的HTTP客户端支持 -->
-        <dependency>
-            <groupId>com.squareup.okhttp3</groupId>
-            <artifactId>okhttp</artifactId>
-            <version>4.12.0</version>
-        </dependency>
+        
         <!-- 测试依赖 -->
         <dependency>
             <groupId>org.springframework.boot</groupId>
@@ -128,4 +141,4 @@
             </plugin>
         </plugins>
     </build>
-</project> 
\ No newline at end of file
+</project>
\ No newline at end of file
Index: src/main/resources/init.sql
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/init.sql b/src/main/resources/init.sql
new file mode 100644
--- /dev/null	(date 1764903064100)
+++ b/src/main/resources/init.sql	(date 1764903064100)
@@ -0,0 +1,51 @@
+/*
+ Navicat Premium Data Transfer
+
+ Source Server         : 127.0.0.1
+ Source Server Type    : MySQL
+ Source Server Version : 80026
+ Source Host           : 127.0.0.1:3306
+ Source Schema         : fund
+
+ Target Server Type    : MySQL
+ Target Server Version : 80026
+ File Encoding         : 65001
+
+ Date: 05/12/2025 10:50:14
+*/
+
+
+-- ----------------------------
+-- Records of email_recipient
+-- ----------------------------
+INSERT INTO `email_recipient` VALUES (1, 'admin', '903635811@qq.com', 1, '2025-12-04 11:02:09', '2025-12-04 11:02:09');
+INSERT INTO `email_recipient` VALUES (2, '薛雄伟', '329045062@qq.com', 1, '2025-12-04 11:02:41', '2025-12-04 15:23:04');
+
+-- ----------------------------
+-- Table structure for fund_monitor
+-- ----------------------------
+
+-- ----------------------------
+-- Records of fund_monitor
+-- ----------------------------
+INSERT INTO `fund_monitor` VALUES (1, '010500', '中银创新医疗混合C', 1, '2025-12-03 11:23:14', '2025-12-03 11:23:14');
+INSERT INTO `fund_monitor` VALUES (2, '016858', '国金量化多因子C', 1, '2025-12-03 11:23:50', '2025-12-03 11:23:50');
+INSERT INTO `fund_monitor` VALUES (3, '007950', '招商量化精选C', 1, '2025-12-03 11:24:10', '2025-12-03 11:24:10');
+INSERT INTO `fund_monitor` VALUES (4, '014198', '华夏智胜先锋股票C', 1, '2025-12-03 11:24:43', '2025-12-03 11:24:43');
+INSERT INTO `fund_monitor` VALUES (5, '021526', '南华丰汇混合C', 1, '2025-12-03 11:25:04', '2025-12-03 11:25:04');
+INSERT INTO `fund_monitor` VALUES (6, '018561', '中信保诚多策略灵活配置混合C', 1, '2025-12-03 11:25:33', '2025-12-03 11:25:33');
+INSERT INTO `fund_monitor` VALUES (7, '002834', '华夏新锦绣灵活配置混合C', 1, '2025-12-03 11:25:52', '2025-12-03 11:25:52');
+INSERT INTO `fund_monitor` VALUES (8, '012920', '易方达全球成长精选混合', 1, '2025-12-03 11:26:16', '2025-12-03 11:26:16');
+INSERT INTO `fund_monitor` VALUES (9, '002170', '东吴移动互联网灵活配置混合C', 1, '2025-12-03 11:26:42', '2025-12-03 11:26:42');
+INSERT INTO `fund_monitor` VALUES (10, '023918', '华夏国证自由现金流ETF连接C', 1, '2025-12-04 15:06:24', '2025-12-04 15:06:24');
+
+
+-- ----------------------------
+-- Records of system_config
+-- ----------------------------
+INSERT INTO `system_config` VALUES (1, 'threshold_5_percent', '5.0', '5%阈值', 1, '2025-12-04 15:04:28', '2025-12-04 15:11:50');
+INSERT INTO `system_config` VALUES (2, 'threshold_4_percent', '4.0', '4%阈值', 1, '2025-12-04 15:04:28', '2025-12-04 15:04:28');
+INSERT INTO `system_config` VALUES (3, 'monitor_days', '5', '监控天数', 1, '2025-12-04 15:04:28', '2025-12-04 15:08:54');
+INSERT INTO `system_config` VALUES (4, 'schedule_cron', '0 0 14 * * ?', '定时任务cron表达式', 1, '2025-12-04 15:04:28', '2025-12-04 15:12:29');
+
+
Index: src/main/java/com/sunlight/invest/system/service/SystemConfigInitializer.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.sunlight.invest.system.service;\r\n\r\nimport com.sunlight.invest.system.entity.SystemConfig;\r\nimport com.sunlight.invest.system.mapper.SystemConfigMapper;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.CommandLineRunner;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n/**\r\n * 系统配置初始化器\r\n * 在应用启动时初始化默认配置项\r\n *\r\n * @author System\r\n * @since 2024-12-04\r\n */\r\n@Component\r\npublic class SystemConfigInitializer implements CommandLineRunner {\r\n    \r\n    private static final Logger log = LoggerFactory.getLogger(SystemConfigInitializer.class);\r\n    \r\n    @Autowired\r\n    private SystemConfigMapper systemConfigMapper;\r\n    \r\n    @Override\r\n    public void run(String... args) throws Exception {\r\n        log.info(\"开始初始化系统配置...\");\r\n        \r\n        // 定义默认配置项\r\n        List<SystemConfig> defaultConfigs = Arrays.asList(\r\n            new SystemConfig(\"threshold_5_percent\", \"5.0\", \"5%阈值\"),\r\n            new SystemConfig(\"threshold_4_percent\", \"4.0\", \"4%阈值\"),\r\n            new SystemConfig(\"monitor_days\", \"7\", \"监控天数\"),\r\n            new SystemConfig(\"schedule_cron\", \"0 0 9 * * ?\", \"定时任务cron表达式\")\r\n        );\r\n        \r\n        // 检查并插入默认配置项\r\n        for (SystemConfig config : defaultConfigs) {\r\n            SystemConfig existingConfig = systemConfigMapper.selectByConfigKey(config.getConfigKey());\r\n            if (existingConfig == null) {\r\n                systemConfigMapper.insert(config);\r\n                log.info(\"初始化配置项: {} = {}\", config.getConfigKey(), config.getConfigValue());\r\n            } else {\r\n                log.info(\"配置项已存在，跳过: {}\", config.getConfigKey());\r\n            }\r\n        }\r\n        \r\n        log.info(\"系统配置初始化完成\");\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/com/sunlight/invest/system/service/SystemConfigInitializer.java b/src/main/java/com/sunlight/invest/system/service/SystemConfigInitializer.java
--- a/src/main/java/com/sunlight/invest/system/service/SystemConfigInitializer.java	(revision 5685c662d7455b53d49f97422dee587071314f0d)
+++ b/src/main/java/com/sunlight/invest/system/service/SystemConfigInitializer.java	(date 1764902461720)
@@ -6,6 +6,7 @@
 import org.slf4j.LoggerFactory;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.boot.CommandLineRunner;
+import org.springframework.dao.DataAccessException;
 import org.springframework.stereotype.Component;
 
 import java.util.Arrays;
@@ -30,25 +31,72 @@
     public void run(String... args) throws Exception {
         log.info("开始初始化系统配置...");
         
-        // 定义默认配置项
-        List<SystemConfig> defaultConfigs = Arrays.asList(
-            new SystemConfig("threshold_5_percent", "5.0", "5%阈值"),
-            new SystemConfig("threshold_4_percent", "4.0", "4%阈值"),
-            new SystemConfig("monitor_days", "7", "监控天数"),
-            new SystemConfig("schedule_cron", "0 0 9 * * ?", "定时任务cron表达式")
-        );
-        
-        // 检查并插入默认配置项
-        for (SystemConfig config : defaultConfigs) {
-            SystemConfig existingConfig = systemConfigMapper.selectByConfigKey(config.getConfigKey());
-            if (existingConfig == null) {
-                systemConfigMapper.insert(config);
-                log.info("初始化配置项: {} = {}", config.getConfigKey(), config.getConfigValue());
-            } else {
-                log.info("配置项已存在，跳过: {}", config.getConfigKey());
-            }
-        }
-        
-        log.info("系统配置初始化完成");
+        try {
+            // 定义默认配置项
+            List<SystemConfig> defaultConfigs = Arrays.asList(
+                new SystemConfig("threshold_5_percent", "5.0", "5%阈值"),
+                new SystemConfig("threshold_4_percent", "4.0", "4%阈值"),
+                new SystemConfig("monitor_days", "7", "监控天数"),
+                new SystemConfig("schedule_cron", "0 0 9 * * ?", "定时任务cron表达式")
+            );
+            
+            // 检查并插入默认配置项
+            for (SystemConfig config : defaultConfigs) {
+                SystemConfig existingConfig = systemConfigMapper.selectByConfigKey(config.getConfigKey());
+                if (existingConfig == null) {
+                    systemConfigMapper.insert(config);
+                    log.info("初始化配置项: {} = {}", config.getConfigKey(), config.getConfigValue());
+                } else {
+                    log.info("配置项已存在，跳过: {}", config.getConfigKey());
+                }
+            }
+            
+            log.info("系统配置初始化完成");
+        } catch (DataAccessException e) {
+            log.warn("系统配置初始化失败，可能是数据库尚未初始化完成: {}", e.getMessage());
+            // 在异步线程中稍后重试
+            new Thread(() -> {
+                try {
+                    Thread.sleep(10000); // 等待10秒
+                    initializeConfigurations();
+                } catch (InterruptedException ie) {
+                    Thread.currentThread().interrupt();
+                }
+            }).start();
+        } catch (Exception e) {
+            log.error("系统配置初始化失败", e);
+        }
+    }
+    
+    /**
+     * 初始化配置项的方法，可在异步线程中调用
+     */
+    private void initializeConfigurations() {
+        try {
+            log.info("重新尝试初始化系统配置...");
+            
+            // 定义默认配置项
+            List<SystemConfig> defaultConfigs = Arrays.asList(
+                new SystemConfig("threshold_5_percent", "5.0", "5%阈值"),
+                new SystemConfig("threshold_4_percent", "4.0", "4%阈值"),
+                new SystemConfig("monitor_days", "7", "监控天数"),
+                new SystemConfig("schedule_cron", "0 0 9 * * ?", "定时任务cron表达式")
+            );
+            
+            // 检查并插入默认配置项
+            for (SystemConfig config : defaultConfigs) {
+                SystemConfig existingConfig = systemConfigMapper.selectByConfigKey(config.getConfigKey());
+                if (existingConfig == null) {
+                    systemConfigMapper.insert(config);
+                    log.info("初始化配置项: {} = {}", config.getConfigKey(), config.getConfigValue());
+                } else {
+                    log.info("配置项已存在，跳过: {}", config.getConfigKey());
+                }
+            }
+            
+            log.info("系统配置初始化完成");
+        } catch (Exception e) {
+            log.error("系统配置初始化重试失败", e);
+        }
     }
 }
\ No newline at end of file
Index: src/main/java/com/sunlight/invest/notification/service/EmailRecipientService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.sunlight.invest.notification.service;\r\n\r\nimport com.sunlight.invest.notification.entity.EmailRecipient;\r\nimport com.sunlight.invest.notification.mapper.EmailRecipientMapper;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\n\r\n/**\r\n * 邮件接收人服务类\r\n *\r\n * @author System\r\n * @since 2024-12-04\r\n */\r\n@Service\r\npublic class EmailRecipientService {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(EmailRecipientService.class);\r\n\r\n    @Autowired\r\n    private EmailRecipientMapper emailRecipientMapper;\r\n\r\n    /**\r\n     * 添加邮件接收人\r\n     *\r\n     * @param emailRecipient 邮件接收人对象\r\n     * @return 添加的记录数\r\n     */\r\n    public int addEmailRecipient(EmailRecipient emailRecipient) {\r\n        try {\r\n            // 检查邮箱是否已存在\r\n            EmailRecipient existing = emailRecipientMapper.selectByEmail(emailRecipient.getEmail());\r\n            if (existing != null) {\r\n                throw new RuntimeException(\"邮箱地址已存在: \" + emailRecipient.getEmail());\r\n            }\r\n            \r\n            int result = emailRecipientMapper.insert(emailRecipient);\r\n            log.info(\"添加邮件接收人成功: {}\", emailRecipient.getEmail());\r\n            return result;\r\n        } catch (Exception e) {\r\n            log.error(\"添加邮件接收人失败: {}\", emailRecipient.getEmail(), e);\r\n            throw new RuntimeException(\"添加邮件接收人失败: \" + e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据ID查询邮件接收人\r\n     *\r\n     * @param id 主键ID\r\n     * @return 邮件接收人对象\r\n     */\r\n    public EmailRecipient getEmailRecipientById(Long id) {\r\n        try {\r\n            EmailRecipient result = emailRecipientMapper.selectById(id);\r\n            log.debug(\"查询邮件接收人: ID={}, 结果={}\", id, result);\r\n            return result;\r\n        } catch (Exception e) {\r\n            log.error(\"查询邮件接收人失败: ID={}\", id, e);\r\n            throw new RuntimeException(\"查询邮件接收人失败: \" + e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据邮箱查询邮件接收人\r\n     *\r\n     * @param email 邮箱地址\r\n     * @return 邮件接收人对象\r\n     */\r\n    public EmailRecipient getEmailRecipientByEmail(String email) {\r\n        try {\r\n            EmailRecipient result = emailRecipientMapper.selectByEmail(email);\r\n            log.debug(\"查询邮件接收人: 邮箱={}, 结果={}\", email, result);\r\n            return result;\r\n        } catch (Exception e) {\r\n            log.error(\"查询邮件接收人失败: 邮箱={}\", email, e);\r\n            throw new RuntimeException(\"查询邮件接收人失败: \" + e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 查询所有启用的邮件接收人\r\n     *\r\n     * @return 邮件接收人列表\r\n     */\r\n    public List<EmailRecipient> getAllEnabledEmailRecipients() {\r\n        try {\r\n            List<EmailRecipient> result = emailRecipientMapper.selectAllEnabled();\r\n            log.debug(\"查询所有启用的邮件接收人，数量: {}\", result.size());\r\n            return result;\r\n        } catch (Exception e) {\r\n            log.error(\"查询所有启用的邮件接收人失败\", e);\r\n            throw new RuntimeException(\"查询所有启用的邮件接收人失败: \" + e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 查询所有邮件接收人\r\n     *\r\n     * @return 邮件接收人列表\r\n     */\r\n    public List<EmailRecipient> getAllEmailRecipients() {\r\n        try {\r\n            List<EmailRecipient> result = emailRecipientMapper.selectAll();\r\n            log.debug(\"查询所有邮件接收人，数量: {}\", result.size());\r\n            return result;\r\n        } catch (Exception e) {\r\n            log.error(\"查询所有邮件接收人失败\", e);\r\n            throw new RuntimeException(\"查询所有邮件接收人失败: \" + e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 更新邮件接收人\r\n     *\r\n     * @param emailRecipient 邮件接收人对象\r\n     * @return 更新的记录数\r\n     */\r\n    public int updateEmailRecipient(EmailRecipient emailRecipient) {\r\n        try {\r\n            // 检查邮箱是否已存在于其他记录中\r\n            EmailRecipient existing = emailRecipientMapper.selectByEmail(emailRecipient.getEmail());\r\n            if (existing != null && !existing.getId().equals(emailRecipient.getId())) {\r\n                throw new RuntimeException(\"邮箱地址已存在: \" + emailRecipient.getEmail());\r\n            }\r\n            \r\n            int result = emailRecipientMapper.update(emailRecipient);\r\n            log.info(\"更新邮件接收人成功: ID={}\", emailRecipient.getId());\r\n            return result;\r\n        } catch (Exception e) {\r\n            log.error(\"更新邮件接收人失败: ID={}\", emailRecipient.getId(), e);\r\n            throw new RuntimeException(\"更新邮件接收人失败: \" + e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据ID删除邮件接收人\r\n     *\r\n     * @param id 主键ID\r\n     * @return 删除的记录数\r\n     */\r\n    public int deleteEmailRecipientById(Long id) {\r\n        try {\r\n            int result = emailRecipientMapper.deleteById(id);\r\n            log.info(\"删除邮件接收人成功: ID={}\", id);\r\n            return result;\r\n        } catch (Exception e) {\r\n            log.error(\"删除邮件接收人失败: ID={}\", id, e);\r\n            throw new RuntimeException(\"删除邮件接收人失败: \" + e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据邮箱删除邮件接收人\r\n     *\r\n     * @param email 邮箱地址\r\n     * @return 删除的记录数\r\n     */\r\n    public int deleteEmailRecipientByEmail(String email) {\r\n        try {\r\n            int result = emailRecipientMapper.deleteByEmail(email);\r\n            log.info(\"删除邮件接收人成功: 邮箱={}\", email);\r\n            return result;\r\n        } catch (Exception e) {\r\n            log.error(\"删除邮件接收人失败: 邮箱={}\", email, e);\r\n            throw new RuntimeException(\"删除邮件接收人失败: \" + e.getMessage(), e);\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/com/sunlight/invest/notification/service/EmailRecipientService.java b/src/main/java/com/sunlight/invest/notification/service/EmailRecipientService.java
--- a/src/main/java/com/sunlight/invest/notification/service/EmailRecipientService.java	(revision 5685c662d7455b53d49f97422dee587071314f0d)
+++ b/src/main/java/com/sunlight/invest/notification/service/EmailRecipientService.java	(date 1764902423141)
@@ -5,9 +5,12 @@
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.dao.DataAccessException;
 import org.springframework.stereotype.Service;
 
+import javax.annotation.PostConstruct;
 import java.util.List;
+import java.util.concurrent.CopyOnWriteArrayList;
 
 /**
  * 邮件接收人服务类
@@ -23,6 +26,41 @@
     @Autowired
     private EmailRecipientMapper emailRecipientMapper;
 
+    // 缓存所有启用的邮件接收人，避免频繁查询数据库
+    private final List<EmailRecipient> enabledRecipientsCache = new CopyOnWriteArrayList<>();
+
+    /**
+     * 初始化缓存
+     */
+    @PostConstruct
+    public void initCache() {
+        // 异步加载邮件接收人列表，提高启动速度
+        new Thread(() -> {
+            try {
+                Thread.sleep(5000); // 等待数据库初始化完成
+                refreshEnabledRecipientsCache();
+            } catch (InterruptedException e) {
+                Thread.currentThread().interrupt();
+            }
+        }).start();
+    }
+
+    /**
+     * 刷新启用的邮件接收人缓存
+     */
+    public void refreshEnabledRecipientsCache() {
+        try {
+            List<EmailRecipient> recipients = emailRecipientMapper.selectAllEnabled();
+            enabledRecipientsCache.clear();
+            enabledRecipientsCache.addAll(recipients);
+            log.info("邮件接收人缓存刷新完成，共加载 {} 个启用的接收人", recipients.size());
+        } catch (DataAccessException e) {
+            log.warn("刷新邮件接收人缓存失败，可能是数据库尚未初始化: {}", e.getMessage());
+        } catch (Exception e) {
+            log.error("刷新邮件接收人缓存失败", e);
+        }
+    }
+
     /**
      * 添加邮件接收人
      *
@@ -39,6 +77,10 @@
             
             int result = emailRecipientMapper.insert(emailRecipient);
             log.info("添加邮件接收人成功: {}", emailRecipient.getEmail());
+            
+            // 刷新缓存
+            refreshEnabledRecipientsCache();
+            
             return result;
         } catch (Exception e) {
             log.error("添加邮件接收人失败: {}", emailRecipient.getEmail(), e);
@@ -86,6 +128,13 @@
      * @return 邮件接收人列表
      */
     public List<EmailRecipient> getAllEnabledEmailRecipients() {
+        // 优先从缓存获取
+        if (!enabledRecipientsCache.isEmpty()) {
+            log.debug("从缓存获取启用的邮件接收人，数量: {}", enabledRecipientsCache.size());
+            return enabledRecipientsCache;
+        }
+        
+        // 缓存为空时直接查询数据库
         try {
             List<EmailRecipient> result = emailRecipientMapper.selectAllEnabled();
             log.debug("查询所有启用的邮件接收人，数量: {}", result.size());
@@ -128,6 +177,10 @@
             
             int result = emailRecipientMapper.update(emailRecipient);
             log.info("更新邮件接收人成功: ID={}", emailRecipient.getId());
+            
+            // 刷新缓存
+            refreshEnabledRecipientsCache();
+            
             return result;
         } catch (Exception e) {
             log.error("更新邮件接收人失败: ID={}", emailRecipient.getId(), e);
@@ -145,6 +198,10 @@
         try {
             int result = emailRecipientMapper.deleteById(id);
             log.info("删除邮件接收人成功: ID={}", id);
+            
+            // 刷新缓存
+            refreshEnabledRecipientsCache();
+            
             return result;
         } catch (Exception e) {
             log.error("删除邮件接收人失败: ID={}", id, e);
@@ -162,6 +219,10 @@
         try {
             int result = emailRecipientMapper.deleteByEmail(email);
             log.info("删除邮件接收人成功: 邮箱={}", email);
+            
+            // 刷新缓存
+            refreshEnabledRecipientsCache();
+            
             return result;
         } catch (Exception e) {
             log.error("删除邮件接收人失败: 邮箱={}", email, e);
Index: src/main/java/com/sunlight/invest/system/service/SystemConfigService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.sunlight.invest.system.service;\r\n\r\nimport com.sunlight.invest.system.entity.SystemConfig;\r\nimport com.sunlight.invest.system.mapper.SystemConfigMapper;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.annotation.PostConstruct;\r\nimport java.math.BigDecimal;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\n\r\n/**\r\n * 系统配置服务类\r\n *\r\n * @author System\r\n * @since 2024-12-04\r\n */\r\n@Service\r\npublic class SystemConfigService {\r\n    \r\n    private static final Logger log = LoggerFactory.getLogger(SystemConfigService.class);\r\n    \r\n    @Autowired\r\n    private SystemConfigMapper systemConfigMapper;\r\n    \r\n    // 缓存配置项，避免每次都查询数据库\r\n    private final Map<String, String> configCache = new ConcurrentHashMap<>();\r\n    \r\n    // 默认配置值\r\n    private static final String DEFAULT_THRESHOLD_5_PERCENT = \"5.0\";\r\n    private static final String DEFAULT_THRESHOLD_4_PERCENT = \"4.0\";\r\n    private static final String DEFAULT_MONITOR_DAYS = \"7\";\r\n    private static final String DEFAULT_SCHEDULE_CRON = \"0 0 9 * * ?\";\r\n    \r\n    /**\r\n     * 初始化配置缓存\r\n     */\r\n    @PostConstruct\r\n    public void initConfigCache() {\r\n        loadAllConfigs();\r\n    }\r\n    \r\n    /**\r\n     * 加载所有启用的配置到缓存\r\n     */\r\n    public void loadAllConfigs() {\r\n        try {\r\n            List<SystemConfig> configs = systemConfigMapper.selectAllEnabled();\r\n            configCache.clear();\r\n            for (SystemConfig config : configs) {\r\n                configCache.put(config.getConfigKey(), config.getConfigValue());\r\n            }\r\n            log.info(\"系统配置缓存加载完成，共加载 {} 个配置项\", configs.size());\r\n        } catch (Exception e) {\r\n            log.error(\"加载系统配置缓存失败\", e);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * 获取5%阈值配置\r\n     *\r\n     * @return 5%阈值\r\n     */\r\n    public BigDecimal getThreshold5Percent() {\r\n        String value = configCache.get(\"threshold_5_percent\");\r\n        if (value == null) {\r\n            value = DEFAULT_THRESHOLD_5_PERCENT;\r\n        }\r\n        try {\r\n            return new BigDecimal(value);\r\n        } catch (NumberFormatException e) {\r\n            log.warn(\"5%阈值配置格式错误，使用默认值: {}\", DEFAULT_THRESHOLD_5_PERCENT);\r\n            return new BigDecimal(DEFAULT_THRESHOLD_5_PERCENT);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * 获取4%阈值配置\r\n     *\r\n     * @return 4%阈值\r\n     */\r\n    public BigDecimal getThreshold4Percent() {\r\n        String value = configCache.get(\"threshold_4_percent\");\r\n        if (value == null) {\r\n            value = DEFAULT_THRESHOLD_4_PERCENT;\r\n        }\r\n        try {\r\n            return new BigDecimal(value);\r\n        } catch (NumberFormatException e) {\r\n            log.warn(\"4%阈值配置格式错误，使用默认值: {}\", DEFAULT_THRESHOLD_4_PERCENT);\r\n            return new BigDecimal(DEFAULT_THRESHOLD_4_PERCENT);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * 获取监控天数配置\r\n     *\r\n     * @return 监控天数\r\n     */\r\n    public int getMonitorDays() {\r\n        String value = configCache.get(\"monitor_days\");\r\n        if (value == null) {\r\n            value = DEFAULT_MONITOR_DAYS;\r\n        }\r\n        try {\r\n            return Integer.parseInt(value);\r\n        } catch (NumberFormatException e) {\r\n            log.warn(\"监控天数配置格式错误，使用默认值: {}\", DEFAULT_MONITOR_DAYS);\r\n            return Integer.parseInt(DEFAULT_MONITOR_DAYS);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * 获取定时任务cron表达式\r\n     *\r\n     * @return cron表达式\r\n     */\r\n    public String getScheduleCron() {\r\n        String value = configCache.get(\"schedule_cron\");\r\n        if (value == null) {\r\n            value = DEFAULT_SCHEDULE_CRON;\r\n        }\r\n        return value;\r\n    }\r\n    \r\n    /**\r\n     * 根据配置键获取配置值\r\n     *\r\n     * @param configKey 配置键\r\n     * @return 配置值\r\n     */\r\n    public String getConfigValue(String configKey) {\r\n        return configCache.get(configKey);\r\n    }\r\n    \r\n    /**\r\n     * 根据配置键获取配置值，如果不存在则返回默认值\r\n     *\r\n     * @param configKey    配置键\r\n     * @param defaultValue 默认值\r\n     * @return 配置值\r\n     */\r\n    public String getConfigValue(String configKey, String defaultValue) {\r\n        String value = configCache.get(configKey);\r\n        return value != null ? value : defaultValue;\r\n    }\r\n    \r\n    /**\r\n     * 更新配置项\r\n     *\r\n     * @param configKey   配置键\r\n     * @param configValue 配置值\r\n     * @return 是否更新成功\r\n     */\r\n    public boolean updateConfig(String configKey, String configValue) {\r\n        try {\r\n            SystemConfig config = systemConfigMapper.selectByConfigKey(configKey);\r\n            if (config != null) {\r\n                config.setConfigValue(configValue);\r\n                int result = systemConfigMapper.update(config);\r\n                if (result > 0) {\r\n                    // 更新缓存\r\n                    configCache.put(configKey, configValue);\r\n                    return true;\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            log.error(\"更新配置项失败，configKey: {}\", configKey, e);\r\n        }\r\n        return false;\r\n    }\r\n    \r\n    /**\r\n     * 获取所有配置项\r\n     *\r\n     * @return 配置项列表\r\n     */\r\n    public List<SystemConfig> getAllConfigs() {\r\n        return systemConfigMapper.selectAll();\r\n    }\r\n    \r\n    /**\r\n     * 根据ID获取配置项\r\n     *\r\n     * @param id 配置项ID\r\n     * @return 配置项\r\n     */\r\n    public SystemConfig getConfigById(Long id) {\r\n        return systemConfigMapper.selectById(id);\r\n    }\r\n    \r\n    /**\r\n     * 更新配置项\r\n     *\r\n     * @param systemConfig 配置项对象\r\n     * @return 是否更新成功\r\n     */\r\n    public boolean updateConfig(SystemConfig systemConfig) {\r\n        try {\r\n            int result = systemConfigMapper.update(systemConfig);\r\n            if (result > 0) {\r\n                // 更新缓存\r\n                configCache.put(systemConfig.getConfigKey(), systemConfig.getConfigValue());\r\n                return true;\r\n            }\r\n        } catch (Exception e) {\r\n            log.error(\"更新配置项失败，id: {}\", systemConfig.getId(), e);\r\n        }\r\n        return false;\r\n    }\r\n    \r\n    /**\r\n     * 删除配置项\r\n     *\r\n     * @param id 配置项ID\r\n     * @return 是否删除成功\r\n     */\r\n    public boolean deleteConfig(Long id) {\r\n        try {\r\n            SystemConfig config = systemConfigMapper.selectById(id);\r\n            if (config != null) {\r\n                int result = systemConfigMapper.deleteById(id);\r\n                if (result > 0) {\r\n                    // 更新缓存\r\n                    configCache.remove(config.getConfigKey());\r\n                    return true;\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            log.error(\"删除配置项失败，id: {}\", id, e);\r\n        }\r\n        return false;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/com/sunlight/invest/system/service/SystemConfigService.java b/src/main/java/com/sunlight/invest/system/service/SystemConfigService.java
--- a/src/main/java/com/sunlight/invest/system/service/SystemConfigService.java	(revision 5685c662d7455b53d49f97422dee587071314f0d)
+++ b/src/main/java/com/sunlight/invest/system/service/SystemConfigService.java	(date 1764902357086)
@@ -5,6 +5,7 @@
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.dao.DataAccessException;
 import org.springframework.stereotype.Service;
 
 import javax.annotation.PostConstruct;
@@ -41,7 +42,15 @@
      */
     @PostConstruct
     public void initConfigCache() {
-        loadAllConfigs();
+        // 异步加载配置，提高启动速度
+        new Thread(() -> {
+            try {
+                Thread.sleep(5000); // 等待数据库初始化完成
+                loadAllConfigs();
+            } catch (InterruptedException e) {
+                Thread.currentThread().interrupt();
+            }
+        }).start();
     }
     
     /**
@@ -55,6 +64,8 @@
                 configCache.put(config.getConfigKey(), config.getConfigValue());
             }
             log.info("系统配置缓存加载完成，共加载 {} 个配置项", configs.size());
+        } catch (DataAccessException e) {
+            log.warn("加载系统配置缓存失败，可能是数据库尚未初始化: {}", e.getMessage());
         } catch (Exception e) {
             log.error("加载系统配置缓存失败", e);
         }
Index: src/main/resources/application.yml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>server:\r\n  port: 8088\r\n\r\nspring:\r\n  datasource:\r\n    url: jdbc:mysql://localhost:3306/fund?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC&allowPublicKeyRetrieval=true&useSSL=false\r\n    username: root\r\n    password: root123456\r\n    driver-class-name: com.mysql.cj.jdbc.Driver\r\n    type: com.alibaba.druid.pool.DruidDataSource\r\n    druid:\r\n      initial-size: 5\r\n      min-idle: 5\r\n      max-active: 20\r\n      stat-view-servlet:\r\n        enabled: true\r\n        url-pattern: /druid/*\r\n        login-username: admin\r\n        login-password: admin\r\n      filter:\r\n        stat:\r\n          enabled: true\r\n          log-slow-sql: true\r\n          slow-sql-millis: 1000\r\n          merge-sql: true\r\n        wall:\r\n          enabled: true\r\n  sql:\r\n    init:\r\n      mode: always\r\n      schema-locations: classpath:schema.sql\r\n      continue-on-error: true\r\n  mail:\r\n    # SMTP服务器地址（QQ邮箱示例）\r\n    host: smtp.qq.com\r\n    port: 587\r\n    # 发送方邮箱账号\r\n    username: 57954282@qq.com\r\n    # 邮箱授权码（不是邮箱密码）\r\n    password: pjglzpdieisebggb\r\n    properties:\r\n      mail:\r\n        smtp:\r\n          auth: true\r\n          starttls:\r\n            enable: true\r\n            required: true\r\n          connectiontimeout: 5000\r\n          timeout: 5000\r\n          writetimeout: 5000\r\n\r\nmanagement:\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: \"*\"\r\n  metrics:\r\n    export:\r\n      prometheus:\r\n        enabled: true\r\n\r\nmybatis:\r\n  configuration:\r\n    map-underscore-to-camel-case: true\r\n\r\n# 通知配置\r\nnotification:\r\n  # 邮件配置\r\n  mail:\r\n    enabled: true\r\n    pass: pjglzpdieisebggb\r\n    # 发送方邮箱，需要修改为你的邮箱\r\n    from: 57954282@qq.com\r\n    # 默认接收方邮箱，多个用逗号分隔\r\n    to: 903635811@qq.com\r\n  # 微信配置（支持Server酱）\r\n  wechat:\r\n    enabled: true\r\n    # Server酱SCKEY，从 https://sct.ftqq.com/ 获取\r\n    server-chan-key: YOUR_SERVER_CHAN_KEY\r\n    # 企业微信配置（可选）\r\n    corp-id: YOUR_CORP_ID\r\n    corp-secret: YOUR_CORP_SECRET\r\n    agent-id: YOUR_AGENT_ID\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/application.yml b/src/main/resources/application.yml
--- a/src/main/resources/application.yml	(revision 5685c662d7455b53d49f97422dee587071314f0d)
+++ b/src/main/resources/application.yml	(date 1764902221415)
@@ -3,10 +3,11 @@
 
 spring:
   datasource:
-    url: jdbc:mysql://localhost:3306/fund?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC&allowPublicKeyRetrieval=true&useSSL=false
-    username: root
-    password: root123456
-    driver-class-name: com.mysql.cj.jdbc.Driver
+    # 使用SQLite数据库
+    url: jdbc:sqlite:./fund.db
+    username: 
+    password: 
+    driver-class-name: org.sqlite.JDBC
     type: com.alibaba.druid.pool.DruidDataSource
     druid:
       initial-size: 5
@@ -29,7 +30,9 @@
     init:
       mode: always
       schema-locations: classpath:schema.sql
+      data-locations: classpath:data.sql
       continue-on-error: true
+
   mail:
     # SMTP服务器地址（QQ邮箱示例）
     host: smtp.qq.com
@@ -81,5 +84,4 @@
     # 企业微信配置（可选）
     corp-id: YOUR_CORP_ID
     corp-secret: YOUR_CORP_SECRET
-    agent-id: YOUR_AGENT_ID
-
+    agent-id: YOUR_AGENT_ID
\ No newline at end of file
